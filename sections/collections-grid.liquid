{% comment %}
  Collections Grid Section
  - 2 cols on mobile, 4 cols on xl
  - Each tile: optional image (object-contain), title bottom-left, link wraps tile
  - Optional captions below grid

  How to use:
  1) Save as: sections/collections-grid.liquid
  2) Add section on any page/template and add up to 12 tiles.
{% endcomment %}

<section id="section-{{ section.id }}" class="collections-grid">
  <div class="container">
    {% if section.settings.heading != blank %}
      <h2 class="heading">{{ section.settings.heading }}</h2>
    {% endif %}

    <div class="grid">
      {% for block in section.blocks %}
        {% assign link = block.settings.link | default: '#' %}
        <a
          {{ block.shopify_attributes }}
          href="{{ link }}"
          class="tile tile--bg-{{ block.settings.bg_style }}"
          aria-label="{{ block.settings.title | escape }}"
        >
          <div class="tile__inner">
            {% if block.settings.image != blank %}
              <div class="tile__media">
                <img
                  src="{{ block.settings.image | image_url: width: 1200 }}"
                  srcset="
                    {{ block.settings.image | image_url: width: 600 }} 600w,
                    {{ block.settings.image | image_url: width: 900 }} 900w,
                    {{ block.settings.image | image_url: width: 1200 }} 1200w
                  "
                  sizes="(min-width: 1280px) 25vw, (min-width: 768px) 50vw, 100vw"
                  alt="{{ block.settings.image.alt | default: block.settings.title | escape }}"
                  loading="lazy"
                />
              </div>
            {% endif %}

            <div class="tile__label">
              <span class="tile__title">{{ block.settings.title }}</span>
              <span class="tile__arrow" aria-hidden>→</span>
            </div>
          </div>
        </a>
      {% else %}
        <div class="empty">
          <p>Add tiles in the section settings.</p>
        </div>
      {% endfor %}
    </div>

  </div>

  {% style %}
    #section-{{ section.id }} { background: #f8fafc; color: #0f172a; }
    #section-{{ section.id }} .container { max-width: 1400px; margin: 0 auto; padding: 2.5rem clamp(1rem, 4vw, 50px); }
    #section-{{ section.id }} .heading { font-size: clamp(1.75rem, 2vw + 1rem, 2.5rem); font-weight: 800; margin: 0 0 1rem; }

    /* Grid: 2 cols on mobile, 2 cols on tablet, 4 on xl */
    #section-{{ section.id }} .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem; }
    @media (min-width: 768px) { #section-{{ section.id }} .grid { grid-template-columns: repeat(2, 1fr); gap: 2rem; } }
    @media (min-width: 1280px){ #section-{{ section.id }} .grid { grid-template-columns: repeat(4, 1fr); gap: 2rem; } }

    /* Tile */
    #section-{{ section.id }} .tile { display: block; border-radius: 1.5rem; overflow: hidden; border: 1px solid #e2e8f0; box-shadow: 0 1px 2px rgba(2,6,23,.04); text-decoration: none; color: inherit; transition: transform 0.3s ease, box-shadow 0.3s ease; }
    #section-{{ section.id }} .tile:hover { transform: translateY(-4px); box-shadow: 0 8px 25px rgba(2,6,23,.12); }
    #section-{{ section.id }} .tile--bg-light { background: #f1f5f9; }
    #section-{{ section.id }} .tile--bg-white { background: #fff; }

    #section-{{ section.id }} .tile__inner { position: relative; padding: clamp(1rem, 3vw, 2rem); aspect-ratio: 4 / 3; display: flex; flex-direction: column; }
    #section-{{ section.id }} .tile__media { flex: 1; display: grid; place-items: center; padding: clamp(1rem, 2vw, 2rem); }
    #section-{{ section.id }} .tile__media img { max-width: 100%; max-height: 100%; width: 100%; height: 100%; object-fit: contain; transform: translateX(4%); transition: transform 0.3s ease, filter 0.3s ease; }
    #section-{{ section.id }} .tile:hover .tile__media img { transform: translateX(4%) scale(1.05); filter: brightness(1.1); }

    #section-{{ section.id }} .tile__label { display: inline-flex; align-items: center; gap: .5rem; font-size: clamp(1.125rem, .75vw + 1rem, 1.5rem); font-weight: 600; color: #1f2937; padding: 0.5rem 0; }
    #section-{{ section.id }} .tile:hover .tile__label .tile__arrow { transform: translateX(2px); }
    #section-{{ section.id }} .tile__arrow { transition: transform .15s ease; }


    /* Empty state */
    #section-{{ section.id }} .empty { background: #fff; border: 1px solid #e2e8f0; border-radius: 1rem; padding: 1.5rem; text-align: center; color: #475569; }
  {% endstyle %}
</section>

{% schema %}
{
  "name": "Collections Grid",
  "tag": "section",
  "class": "section",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Collections" }
  ],
  "blocks": [
    {
      "type": "tile",
      "name": "Tile",
      "settings": [
        { "type": "text", "id": "title", "label": "Title", "default": "Konfigurator" },
        { "type": "url",  "id": "link",  "label": "Link" },
        { "type": "image_picker", "id": "image", "label": "Image (optional)" },
        { "type": "select", "id": "bg_style", "label": "Tile background", "default": "light", "options": [
          { "value": "light", "label": "Light (slate-100)" },
          { "value": "white", "label": "White" }
        ]}
      ]
    }
  ],
  "max_blocks": 12,
  "presets": [
    {
      "name": "Collections Grid (4 tiles)",
      "blocks": [
        { "type": "tile", "settings": { "title": "Konfigurator", "bg_style": "light" } },
        { "type": "tile", "settings": { "title": "Startseite", "bg_style": "white" } },
        { "type": "tile", "settings": { "title": "PV / Speicher", "bg_style": "white" } },
        { "type": "tile", "settings": { "title": "E‑Mobilität", "bg_style": "light" } }
      ]
    }
  ]
}
{% endschema %}
